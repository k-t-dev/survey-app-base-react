{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/DEVELOPMENT/survey/frontend/src/pages/EditCompanies.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Modal from \"react-modal\";\nimport { CSVLink } from \"react-csv\";\n\n// モーダルのアクセシビリティ設定\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nModal.setAppElement(\"#root\");\nconst ManageInfo = () => {\n  _s();\n  const companyTableColumns = {\n    会社名: \"\",\n    会社住所: \"\",\n    会社連絡先: \"\",\n    代表者: \"\",\n    メモ: \"\"\n  };\n  const shopTableColumns = {\n    店舗名: \"\",\n    店舗住所: \"\",\n    会社連絡先: \"\",\n    代表者: \"\",\n    契約開始日: \"\",\n    契約終了日: \"\",\n    担当者: \"\",\n    メモ: \"\"\n  };\n  // const shopTableColumns = { 店舗名: \"\", 店舗住所: \"\", 会社連絡先:\"\", 代表者:\"\", 契約開始日: \"\", 契約終了日: \"\", 担当者:\"\", アンケートリンク: \"\", Google評価リンク: \"\" , メモ:\"\"};\n  const [viewMode, setViewMode] = useState(\"company\");\n  const [editingCompany, setEditingCompany] = useState(null);\n  const [editingShop, setEditingShop] = useState(null);\n  const [newCompanyData, setNewCompanyData] = useState(companyTableColumns);\n  const [newShopData, setNewShopData] = useState(shopTableColumns);\n  const [isCompanyModalOpen, setIsCompanyModalOpen] = useState(false);\n  const [isShopModalOpen, setIsShopModalOpen] = useState(false);\n  const [shopAddTargetIndex, setShopAddTargetIndex] = useState(null); // 新規店舗追加先の企業インデックス\n\n  const [companies, setCompanies] = useState([]);\n  const [shops, setShops] = useState([]);\n  const [loading, setLoading] = useState(true); // Optional: ローディング状態管理\n  const [error, setError] = useState(null); // Optional: エラーハンドリング\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // 並行して複数のAPIを呼び出し\n        const [companiesResponse, shopsResponse] = await Promise.all([axios.get(\"http://0.0.0.0:5001/companies\"), axios.get(\"http://0.0.0.0:5001/shops\")]);\n\n        // 取得したデータをそれぞれのステートに保存\n        setCompanies(companiesResponse.data);\n        setShops(shopsResponse.data);\n      } catch (err) {\n        setError(\"データの取得に失敗しました\");\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"\\u8AAD\\u307F\\u8FBC\\u307F\\u4E2D...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 21\n  }, this);\n  console.log('companies', companies);\n  console.log('shops', shops);\n\n  ////  ~~~~~~~~~~~~~~~~~~~~ 企業 ~~~~~~~~~~~~~~~~~~~~\n\n  const handleEditCompanyModalContents = index => {\n    // Get the company data at the given index\n    const companyToEdit = companies[index];\n    //UI 表示のため\n    const mappedCompanyForUI = {\n      \"会社名\": companyToEdit.company_name,\n      \"会社住所\": companyToEdit.company_address,\n      \"会社連絡先\": companyToEdit.company_contact_address,\n      \"代表者\": companyToEdit.company_owner_name,\n      \"メモ\": companyToEdit.remarks\n    };\n    setEditingCompany({\n      ...mappedCompanyForUI,\n      index\n    });\n    setIsCompanyModalOpen(true);\n  };\n\n  //既存企業の削除\n  const handleDeleteCompany = async index => {\n    const company = companies[index];\n    const isConfirmed = window.confirm(`${company.company_name} を本当に削除しますか？`);\n    if (isConfirmed) {\n      try {\n        // Set the contract to 'cancel'\n        console.log(\"####company###\", company);\n        company.contract = 'cancel';\n\n        // TODO Make the API request to delete the company\n        const response = await fetch(`http://0.0.0.0:5001/company/temp_status_changes/${company.company_id}/${company.contract}`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.ok) {\n          // If successful, remove the company from the local state\n          setCompanies(companies.filter((_, i) => i !== index));\n          alert(`企業（${company.company_name}）が削除されました`);\n        } else {\n          // Handle error if the API request fails\n          alert(`企業（${company.company_name}）の削除に失敗しました`);\n        }\n      } catch (error) {\n        // Handle network error\n        console.error(\"Error deleting company:\", error);\n        alert(\"ネットワークエラーが発生しました\");\n      }\n    }\n  };\n  const resetCompanyData = () => {\n    setNewCompanyData({\n      ...companyTableColumns\n    }); // スプレッド構文でプロパティを展開\n  };\n\n  //既存企業の編集\n  const handleEditCompany = async () => {\n    const updatedCompanies = [...companies];\n    // Filter and update the company by its index\n    const updatedCompany = {\n      ...editingCompany\n    }; // Create a copy of the editing company object\n    const current_index = updatedCompany.index;\n    const company = updatedCompanies[current_index];\n    const updatedCompanyPayload = {\n      company_name: updatedCompany.会社名,\n      company_address: updatedCompany.会社住所,\n      company_contact_address: updatedCompany.会社連絡先,\n      company_owner_name: updatedCompany.代表者,\n      remarks: updatedCompany.メモ\n    };\n    updatedCompanyPayload.contract = 'contract';\n    console.log('updatedCompanies', updatedCompanies);\n    console.log('company', company);\n    console.log('updatedCompany', updatedCompany);\n    console.log('updatedCompanyPayload', updatedCompanyPayload);\n\n    // Make the API request to save the updated companies\n    try {\n      const companyId = company.company_id;\n      const response = await fetch(`http://0.0.0.0:5001/company/${companyId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(updatedCompanyPayload)\n      });\n      console.log('response', response);\n      if (response.ok) {\n        // Assuming the response returns a success status\n        delete updatedCompanyPayload.contract;\n        const updatedList = [...companies];\n        updatedList[updatedCompany.index] = {\n          ...updatedList[updatedCompany.index],\n          ...updatedCompanyPayload\n        };\n        setCompanies(updatedList);\n        setEditingCompany(null);\n        setIsCompanyModalOpen(false);\n        alert(`${updatedList.company_name}の更新に成功しました。`);\n      } else {\n        alert(`${updatedCompanyPayload.company_name}の更新に失敗しました。`);\n      }\n    } catch (error) {\n      console.error('Error saving company data:', error);\n      alert(`${updatedCompanyPayload.company_name}の更新に失敗しました。`);\n    }\n  };\n\n  //新規企業の追加\n  const handleAddCompany = async () => {\n    // 会社名が空かどうかを確認\n    if (!newCompanyData.会社名) {\n      alert(\"会社名は必須です。\");\n      return; // 会社名がない場合は処理を中断\n    }\n    // Map front-end keys to API keys\n    const mappedCompany = {\n      company_name: newCompanyData.会社名,\n      company_address: newCompanyData.会社住所,\n      company_contact_address: newCompanyData.会社連絡先,\n      company_owner_name: newCompanyData.代表者,\n      remarks: newCompanyData.メモ\n    };\n    try {\n      console.log(\"mappedCompany\", mappedCompany); // Logs the object with the new keys\n      // API call to add the new company\n      const response = await fetch('http://0.0.0.0:5001/company', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(mappedCompany)\n      });\n      console.log(\"##--companies\", companies);\n      if (!response.ok) {\n        throw new Error('Failed to add company');\n      }\n\n      // Update the local state after the company has been successfully added\n      const addedCompany = await response.json(); // Assuming the API returns the added company data\n\n      setCompanies([...companies, addedCompany]);\n\n      // Reset the form and close the modal\n      // setNewCompanyData({ ...companyTableColumns });\n\n      console.log(\"!!!addedCompany!!!\", addedCompany);\n      console.log(\"##--companies--##\", companies);\n\n      // close the modal\n      setIsCompanyModalOpen(false);\n      alert(\"保存が成功しました。\");\n    } catch (error) {\n      console.error('Error adding company:', error);\n      alert('企業の追加に失敗しました');\n    }\n  };\n\n  ////  ~~~~~~~~~~~~~~~~~~~~ 店舗 ~~~~~~~~~~~~~~~~~~~~\n\n  //新規店舗の追加\n  const handleAddShop = async () => {\n    console.log('!!companies!!', companies);\n    console.log('!!shopAddTargetIndex!!', shopAddTargetIndex); // company index\n    console.log('!!shopAddTargetIndex!!', companies[shopAddTargetIndex]);\n    console.log('!!newShopData!!', newShopData);\n    if (!newShopData.店舗名 || !newShopData.契約開始日 || !newShopData.契約終了日) {\n      alert(\"店舗名、契約開始日、契約終了日は必須です。\");\n      return; // 必須項目が未入力の場合は処理を中断\n    }\n    const relating_company_id = companies[shopAddTargetIndex].company_id;\n    console.log('!!relating_company_id!!', relating_company_id);\n\n    // TODO Map front-end keys to API keys\n    const mappedShop = {\n      shop_name: newShopData.店舗名,\n      shop_owner_name: newShopData.店舗住所,\n      shop_contact_address: newShopData.会社連絡先,\n      shop_location: newShopData.代表者,\n      start_contract_date: newShopData.契約開始日,\n      end_contract_date: newShopData.契約終了日,\n      in_charge: newShopData.担当者,\n      remarks: newShopData.メモ\n    };\n    try {\n      console.log(\"INSERT relating_company_id\", relating_company_id);\n      console.log(\"INSERT mappedShop\", mappedShop); // Logs the object with the new keys\n\n      // API call to add the new shop\n      const response = await fetch(`http://0.0.0.0:5001/shop/${relating_company_id}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(mappedShop)\n      });\n      if (!response.ok) {\n        throw new Error('Failed to add shop');\n      }\n\n      //リターンでデータの受け取りと、追加\n      const addedShops = await response.json(); // Assuming the API returns the added company data\n      console.log(\"!!!addedShops!!!\", addedShops);\n      console.log(\"!!!--shops--!!!\", shops);\n      const link_response = await fetch(`http://0.0.0.0:5001/survey-link/${company_id}/${shop_id}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n\n      // ローカル状態に新店舗を追加\n      setShops([...shops, addedShops]);\n\n      // 追加後新たに追加するときに、追加項目を準備\n      setNewShopData({\n        ...shopTableColumns\n      });\n\n      //モーダルを削除\n      setIsShopModalOpen(false);\n      alert(\"保存が成功しました。\");\n    } catch (error) {\n      console.error('Error adding shop:', error);\n      alert('企業の追加に失敗しました');\n    }\n  };\n\n  //既存店舗の削除\n  const handleDeleteShop = async (companyIndex, shop_id) => {\n    const company = companies[companyIndex]; //会社の指定\n    const shopInCompany = shops.find(shop => shop.company_id === company.company_id && shop.shop_id === shop_id);\n    ; //ショップの指定\n    console.log(\"@@company\", company);\n    console.log(\"@@shopInCompany\", shopInCompany);\n    const isConfirmed = window.confirm(`${shopInCompany.shop_name} を本当に削除しますか？`);\n    if (isConfirmed) {\n      try {\n        // Set the contract to 'cancel'\n        console.log(\"@@DELETE shop\", shopInCompany);\n        shopInCompany.contract = 'cancel';\n\n        // TODO Make the API request to delete the company /shop/temp_status_changes/{company_id}/{shop_id}/{contract}\n        const response = await fetch(`http://0.0.0.0:5001/shop/temp_status_changes/${shopInCompany.company_id}/${shopInCompany.shop_id}/${shopInCompany.contract}`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        console.log(\"@@DELETE shop response\", response);\n        if (response.ok) {\n          setShops(shops.filter(shop => shop.shop_id !== shop_id));\n          alert(`${company.company_name}）の店舗（${shopInCompany.shop_name}）が削除されました。`);\n        } else {\n          // Handle error if the API request fails\n          alert(`${company.company_name}）の店舗（${shopInCompany.shop_name}）の削除に失敗しました。`);\n        }\n      } catch (error) {\n        // Handle network error\n        console.error(\"Error deleting company:\", error);\n        alert(\"ネットワークエラーが発生しました\");\n      }\n    }\n  };\n\n  //既存店舗の編集項目表示\n  const handleEditShopModalContents = (companyIndex, shop_id) => {\n    console.log('!!!companyIndex!!!', companyIndex);\n    console.log('!!!shop_id!!!', shop_id);\n    const company = companies[companyIndex]; //会社の指定\n    const company_id = company.company_id;\n    const shopToEdit = shops.find(shop => shop.company_id === company_id && shop.shop_id === shop_id);\n    ; //ショップの指定\n\n    //UI 表示のため\n    const mappedShopForUI = {\n      \"店舗名\": shopToEdit.shop_name,\n      \"店舗住所\": shopToEdit.shop_location,\n      \"会社連絡先\": shopToEdit.shop_contact_address,\n      \"代表者\": shopToEdit.shop_owner_name,\n      \"契約開始日\": shopToEdit.start_contract_date,\n      \"契約終了日\": shopToEdit.end_contract_date,\n      \"担当者\": shopToEdit.in_charge,\n      \"メモ\": shopToEdit.remarks\n    };\n    setEditingShop({\n      ...mappedShopForUI,\n      shop_id,\n      company_id\n    });\n    console.log('RRRR', mappedShopForUI);\n    setIsShopModalOpen(true);\n  };\n\n  //　既存店舗の編集\n  const handleEditShop = async () => {\n    const company_id = editingShop.company_id;\n    const shop_id = editingShop.shop_id;\n    const index = shops.findIndex(shop => shop.company_id === company_id && shop.shop_id === shop_id);\n    console.log('!!!index!!!', index);\n    const updatedShop = {\n      ...editingShop,\n      index\n    };\n    const updatedShopPayload = {\n      shop_name: updatedShop.店舗名,\n      shop_location: updatedShop.店舗住所,\n      shop_contact_address: updatedShop.会社連絡先,\n      shop_owner_name: updatedShop.代表者,\n      start_contract_date: updatedShop.契約開始日,\n      end_contract_date: updatedShop.契約終了日,\n      in_charge: updatedShop.担当者,\n      remarks: updatedShop.メモ\n    };\n    try {\n      const response = await fetch(`http://0.0.0.0:5001/shop/${company_id}/${shop_id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(updatedShopPayload)\n      });\n      console.log('@@response@@', response);\n      if (response.ok) {\n        console.log('##########', updatedShop);\n        // 更新対象だけを更新する\n        setShops(prevShops => {\n          const newShops = [...prevShops];\n          newShops[index] = {\n            ...newShops[index],\n            ...updatedShopPayload\n          };\n          return newShops;\n        });\n        console.log('######rr####', response);\n        setEditingShop(null);\n        setIsShopModalOpen(false);\n        alert(`${updatedShopPayload.shop_name}の更新に成功しました。`);\n      } else {\n        alert(`${updatedShopPayload.shop_name}の更新に失敗しました。`);\n      }\n    } catch (error) {\n      console.error('Error saving shop data:', error);\n      alert(`${updatedShopPayload.shop_name}の更新に失敗しました。`);\n    }\n  };\n\n  // ~~~~~~~~~~~~~~~~~~~~ HTML ~~~~~~~~~~~~~~~~~~~~\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: \"1000px\",\n      margin: \"0 auto\",\n      padding: \"20px\",\n      fontFamily: \"'Arial', sans-serif\",\n      color: \"#333\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        textAlign: \"center\",\n        color: \"#007bff\"\n      },\n      children: \"\\u4F01\\u696D\\u304A\\u3088\\u3073\\u5E97\\u8217\\u60C5\\u5831\\u306E\\u7BA1\\u7406\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        marginBottom: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setViewMode(\"company\"),\n        style: {\n          padding: \"10px 20px\",\n          marginRight: \"10px\",\n          backgroundColor: viewMode === \"company\" ? \"#007bff\" : \"#f8f9fa\",\n          border: \"1px solid #007bff\",\n          borderRadius: \"5px\",\n          cursor: \"pointer\"\n        },\n        children: \"\\u4F01\\u696D\\u60C5\\u5831\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setViewMode(\"shop\"),\n        style: {\n          padding: \"10px 20px\",\n          backgroundColor: viewMode === \"shop\" ? \"#007bff\" : \"#f8f9fa\",\n          border: \"1px solid #007bff\",\n          borderRadius: \"5px\",\n          cursor: \"pointer\"\n        },\n        children: \"\\u5E97\\u8217\\u60C5\\u5831\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 7\n    }, this), viewMode === \"company\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          textAlign: \"center\",\n          marginBottom: \"20px\"\n        },\n        children: \"\\u4F01\\u696D\\u60C5\\u5831\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: \"10px 0\",\n          textAlign: \"right\"\n        },\n        children: /*#__PURE__*/_jsxDEV(CSVLink, {\n          data: companies.map(company => ({\n            会社名: company.company_name,\n            会社住所: company.company_address,\n            会社連絡先: company.company_contact_address,\n            代表者: company.company_owner_name,\n            メモ: company.remarks\n          })),\n          headers: [{\n            label: \"会社名\",\n            key: \"会社名\"\n          }, {\n            label: \"会社住所\",\n            key: \"会社住所\"\n          }, {\n            label: \"会社連絡先\",\n            key: \"会社連絡先\"\n          }, {\n            label: \"代表者\",\n            key: \"代表者\"\n          }, {\n            label: \"メモ\",\n            key: \"メモ\"\n          }],\n          filename: \"company_details.csv\",\n          style: {\n            padding: \"10px 20px\",\n            backgroundColor: \"#17a2b8\",\n            color: \"#fff\",\n            borderRadius: \"5px\",\n            textDecoration: \"none\"\n          },\n          children: \"CSV\\u51FA\\u529B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setEditingCompany(null);\n          setIsCompanyModalOpen(true);\n        },\n        style: {\n          padding: \"10px 20px\",\n          backgroundColor: \"#28a745\",\n          color: \"#fff\",\n          border: \"none\",\n          borderRadius: \"5px\",\n          cursor: \"pointer\"\n        },\n        children: \"\\u65B0\\u898F\\u4F01\\u696D\\u8FFD\\u52A0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 11\n      }, this), companies.sort((a, b) => a.company_name.localeCompare(b.company_name)) // 会社名で昇順ソート\n      .map((company, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: \"20px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          border: \"1\",\n          style: {\n            width: \"100%\",\n            borderCollapse: \"collapse\",\n            marginTop: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              style: {\n                backgroundColor: \"#f1f1f1\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u4F1A\\u793E\\u540D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u4EE3\\u8868\\u8005\\u306E\\u540D\\u524D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u4F1A\\u793E\\u4F4F\\u6240\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u4F1A\\u793E\\u9023\\u7D61\\u5148\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u30E1\\u30E2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u30A2\\u30AF\\u30B7\\u30E7\\u30F3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: company.company_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: company.company_owner_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 499,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: company.company_address\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: company.company_contact_address\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: company.remarks\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  textAlign: \"center\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleEditCompanyModalContents(index),\n                  style: {\n                    marginRight: \"5px\",\n                    backgroundColor: \"#ffc107\",\n                    padding: \"5px 10px\",\n                    borderRadius: \"5px\"\n                  },\n                  children: \"\\u7DE8\\u96C6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleDeleteCompany(index),\n                  style: {\n                    backgroundColor: \"#dc3545\",\n                    padding: \"5px 10px\",\n                    borderRadius: \"5px\",\n                    color: \"#fff\"\n                  },\n                  children: \"\\u524A\\u9664\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 17\n        }, this)\n      }, company.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 15\n      }, this))]\n    }, void 0, true), viewMode === \"shop\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          textAlign: \"center\",\n          marginBottom: \"20px\"\n        },\n        children: \"\\u5E97\\u8217\\u60C5\\u5831\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: \"10px 0\",\n          textAlign: \"right\"\n        },\n        children: /*#__PURE__*/_jsxDEV(CSVLink, {\n          data: shops.map(shop => {\n            const company = companies.find(c => c.company_id === shop.company_id);\n            return {\n              会社名: (company === null || company === void 0 ? void 0 : company.company_name) || \"\",\n              店舗名: shop.shop_name,\n              店舗住所: shop.shop_location,\n              会社連絡先: shop.shop_contact_address,\n              代表者: shop.shop_owner_name,\n              契約開始日: shop.start_contract_date,\n              契約終了日: shop.end_contract_date,\n              担当者: shop.in_charge,\n              メモ: shop.remarks,\n              アンケートリンク: shop.surveyUrl,\n              Google評価リンク: shop.googleUrl\n            };\n          }),\n          headers: [{\n            label: \"会社名\",\n            key: \"会社名\"\n          }, {\n            label: \"店舗名\",\n            key: \"店舗名\"\n          }, {\n            label: \"店舗住所\",\n            key: \"店舗住所\"\n          }, {\n            label: \"会社連絡先\",\n            key: \"会社連絡先\"\n          }, {\n            label: \"代表者\",\n            key: \"代表者\"\n          }, {\n            label: \"契約開始日\",\n            key: \"契約開始日\"\n          }, {\n            label: \"契約終了日\",\n            key: \"契約終了日\"\n          }, {\n            label: \"担当者\",\n            key: \"担当者\"\n          }, {\n            label: \"メモ\",\n            key: \"メモ\"\n          }, {\n            label: \"アンケートリンク\",\n            key: \"アンケートリンク\"\n          }, {\n            label: \"Google評価リンク\",\n            key: \"Google評価リンク\"\n          }],\n          filename: \"shops.csv\",\n          style: {\n            padding: \"10px 20px\",\n            backgroundColor: \"#17a2b8\",\n            color: \"#fff\",\n            borderRadius: \"5px\",\n            textDecoration: \"none\"\n          },\n          children: \"CSV\\u51FA\\u529B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 11\n      }, this), companies.map((company, companyIndex) => {\n        // Filter shops by company_id\n        const companyShops = shops.filter(shop => shop.company_id === company.company_id);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: \"20px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [company.company_name, \" \\u306E\\u5E97\\u8217\\u60C5\\u5831\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setShopAddTargetIndex(companyIndex);\n              setEditingShop(null);\n              setIsShopModalOpen(true);\n            },\n            style: {\n              padding: \"8px 15px\",\n              backgroundColor: \"#28a745\",\n              color: \"#fff\",\n              borderRadius: \"5px\"\n            },\n            children: \"\\u65B0\\u898F\\u5E97\\u8217\\u8FFD\\u52A0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n            border: \"1\",\n            style: {\n              width: \"100%\",\n              marginTop: \"10px\",\n              borderCollapse: \"collapse\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                style: {\n                  backgroundColor: \"#f1f1f1\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u5E97\\u8217\\u540D\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 574,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u5E97\\u8217\\u4F4F\\u6240\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 575,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u4F1A\\u793E\\u9023\\u7D61\\u5148\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 576,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u4EE3\\u8868\\u8005\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 577,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u5951\\u7D04\\u958B\\u59CB\\u65E5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 578,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u5951\\u7D04\\u7D42\\u4E86\\u65E5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 579,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u62C5\\u5F53\\u8005\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 580,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u30E1\\u30E2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 581,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u30A2\\u30F3\\u30B1\\u30FC\\u30C8\\u30EA\\u30F3\\u30AF\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 582,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Google\\u8A55\\u4FA1\\u30EA\\u30F3\\u30AF\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 583,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u30A2\\u30AF\\u30B7\\u30E7\\u30F3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 584,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: companyShops.length > 0 ? companyShops.map((shop, shopIndex) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: shop.shop_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 591,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: shop.shop_location\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 592,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: shop.shop_contact_address\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 593,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: shop.shop_owner_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 594,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: shop.start_contract_date\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 595,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: shop.end_contract_date\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 596,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: shop.in_charge\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 597,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: shop.remarks\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 598,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: shop.surveyUrl,\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    children: shop.surveyUrl\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 600,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 600,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: shop.googleUrl,\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    children: shop.googleUrl\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 601,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 601,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleEditShopModalContents(companyIndex, shop.shop_id),\n                    style: {\n                      marginRight: \"5px\",\n                      backgroundColor: \"#ffc107\",\n                      padding: \"5px 10px\",\n                      borderRadius: \"5px\"\n                    },\n                    children: \"\\u7DE8\\u96C6\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 603,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleDeleteShop(companyIndex, shop.shop_id),\n                    style: {\n                      backgroundColor: \"#dc3545\",\n                      color: \"#fff\",\n                      padding: \"5px 10px\",\n                      borderRadius: \"5px\"\n                    },\n                    children: \"\\u524A\\u9664\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 604,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 602,\n                  columnNumber: 27\n                }, this)]\n              }, shop.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 590,\n                columnNumber: 25\n              }, this)) : /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: /*#__PURE__*/_jsxDEV(\"td\", {\n                  colSpan: \"11\",\n                  style: {\n                    textAlign: \"center\"\n                  },\n                  children: \"\\u5E97\\u8217\\u60C5\\u5831\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 610,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 609,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 17\n          }, this)]\n        }, company.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 15\n        }, this);\n      })]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isCompanyModalOpen,\n      onRequestClose: () => setIsCompanyModalOpen(false),\n      style: {\n        content: {\n          maxWidth: \"600px\",\n          margin: \"auto\"\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: editingCompany ? \"企業情報を編集\" : \"新規企業を追加\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 624,\n        columnNumber: 9\n      }, this), (editingCompany ? Object.keys(editingCompany).filter(k => k !== \"id\" && k !== \"shops\" && k !== \"index\") : Object.keys(newCompanyData)).map(key => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: \"10px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [key, \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: editingCompany ? editingCompany[key] : newCompanyData[key],\n          onChange: e => editingCompany ? setEditingCompany({\n            ...editingCompany,\n            [key]: e.target.value\n          }) : setNewCompanyData({\n            ...newCompanyData,\n            [key]: e.target.value\n          }),\n          style: {\n            width: \"100%\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 13\n        }, this)]\n      }, key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"space-between\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: editingCompany ? handleEditCompany : handleAddCompany,\n          style: {\n            backgroundColor: \"#007bff\",\n            color: \"#fff\",\n            padding: \"10px 20px\"\n          },\n          children: editingCompany ? \"保存\" : \"追加\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 642,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setIsCompanyModalOpen(false);\n            resetCompanyData(); // Reset when cancelling\n          },\n          style: {\n            backgroundColor: \"#6c757d\",\n            color: \"#fff\",\n            padding: \"10px 20px\"\n          },\n          children: \"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 646,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 641,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 623,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isShopModalOpen,\n      onRequestClose: () => setIsShopModalOpen(false),\n      style: {\n        content: {\n          maxWidth: \"600px\",\n          margin: \"auto\"\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: editingShop ? \"店舗情報を編集\" : \"新規店舗を追加\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 657,\n        columnNumber: 9\n      }, this), (editingShop ? Object.keys(editingShop).filter(k => ![\"id\", \"companyIndex\", \"shopIndex\", \"shop_id\", \"company_id\"].includes(k)) : Object.keys(newShopData)).map(key => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: \"10px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [key, \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 661,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: [\"契約開始日\", \"契約終了日\"].includes(key) ? \"date\" : \"text\",\n          value: editingShop ? editingShop[key] : newShopData[key],\n          onChange: e => editingShop ? setEditingShop({\n            ...editingShop,\n            [key]: e.target.value\n          }) : setNewShopData({\n            ...newShopData,\n            [key]: e.target.value\n          }),\n          style: {\n            width: \"100%\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 13\n        }, this)]\n      }, key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 660,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"space-between\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: editingShop ? handleEditShop : handleAddShop,\n          style: {\n            backgroundColor: \"#007bff\",\n            color: \"#fff\",\n            padding: \"10px 20px\"\n          },\n          children: editingShop ? \"保存\" : \"追加\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 678,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setIsShopModalOpen(false);\n            // resetShopData(); // Reset when cancelling\n          },\n          style: {\n            backgroundColor: \"#6c757d\",\n            color: \"#fff\",\n            padding: \"10px 20px\"\n          },\n          children: \"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 681,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 677,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 656,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 434,\n    columnNumber: 5\n  }, this);\n};\n_s(ManageInfo, \"6ckDLmZDWpWJir8bi/73GfZSAag=\");\n_c = ManageInfo;\nexport default ManageInfo;\nvar _c;\n$RefreshReg$(_c, \"ManageInfo\");","map":{"version":3,"names":["useState","useEffect","axios","Modal","CSVLink","jsxDEV","_jsxDEV","Fragment","_Fragment","setAppElement","ManageInfo","_s","companyTableColumns","会社名","会社住所","会社連絡先","代表者","メモ","shopTableColumns","店舗名","店舗住所","契約開始日","契約終了日","担当者","viewMode","setViewMode","editingCompany","setEditingCompany","editingShop","setEditingShop","newCompanyData","setNewCompanyData","newShopData","setNewShopData","isCompanyModalOpen","setIsCompanyModalOpen","isShopModalOpen","setIsShopModalOpen","shopAddTargetIndex","setShopAddTargetIndex","companies","setCompanies","shops","setShops","loading","setLoading","error","setError","fetchData","companiesResponse","shopsResponse","Promise","all","get","data","err","console","children","fileName","_jsxFileName","lineNumber","columnNumber","log","handleEditCompanyModalContents","index","companyToEdit","mappedCompanyForUI","company_name","company_address","company_contact_address","company_owner_name","remarks","handleDeleteCompany","company","isConfirmed","window","confirm","contract","response","fetch","company_id","method","headers","ok","filter","_","i","alert","resetCompanyData","handleEditCompany","updatedCompanies","updatedCompany","current_index","updatedCompanyPayload","companyId","body","JSON","stringify","updatedList","handleAddCompany","mappedCompany","Error","addedCompany","json","handleAddShop","relating_company_id","mappedShop","shop_name","shop_owner_name","shop_contact_address","shop_location","start_contract_date","end_contract_date","in_charge","addedShops","link_response","shop_id","handleDeleteShop","companyIndex","shopInCompany","find","shop","handleEditShopModalContents","shopToEdit","mappedShopForUI","handleEditShop","findIndex","updatedShop","updatedShopPayload","prevShops","newShops","style","maxWidth","margin","padding","fontFamily","color","textAlign","display","justifyContent","marginBottom","onClick","marginRight","backgroundColor","border","borderRadius","cursor","map","label","key","filename","textDecoration","sort","a","b","localeCompare","width","borderCollapse","marginTop","id","c","アンケートリンク","surveyUrl","Google評価リンク","googleUrl","companyShops","length","shopIndex","href","target","rel","colSpan","isOpen","onRequestClose","content","Object","keys","k","type","value","onChange","e","includes","_c","$RefreshReg$"],"sources":["/Users/user/Desktop/DEVELOPMENT/survey/frontend/src/pages/EditCompanies.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Modal from \"react-modal\";\nimport { CSVLink } from \"react-csv\";\n\n\n// モーダルのアクセシビリティ設定\nModal.setAppElement(\"#root\");\n\nconst ManageInfo = () => {\n\n  const companyTableColumns = { 会社名: \"\", 会社住所: \"\", 会社連絡先: \"\", 代表者: \"\", メモ: \"\" };\n  const shopTableColumns = { 店舗名: \"\", 店舗住所: \"\", 会社連絡先:\"\", 代表者:\"\", 契約開始日: \"\", 契約終了日: \"\", 担当者:\"\", メモ:\"\"};\n  // const shopTableColumns = { 店舗名: \"\", 店舗住所: \"\", 会社連絡先:\"\", 代表者:\"\", 契約開始日: \"\", 契約終了日: \"\", 担当者:\"\", アンケートリンク: \"\", Google評価リンク: \"\" , メモ:\"\"};\n  const [viewMode, setViewMode] = useState(\"company\");\n  const [editingCompany, setEditingCompany] = useState(null);\n  const [editingShop, setEditingShop] = useState(null);\n\n  const [newCompanyData, setNewCompanyData] = useState(companyTableColumns);\n  const [newShopData, setNewShopData] = useState(shopTableColumns);\n  const [isCompanyModalOpen, setIsCompanyModalOpen] = useState(false);\n  const [isShopModalOpen, setIsShopModalOpen] = useState(false);\n  const [shopAddTargetIndex, setShopAddTargetIndex] = useState(null); // 新規店舗追加先の企業インデックス\n\n  const [companies, setCompanies] = useState([]);\n  const [shops, setShops] = useState([]);\n  \n  const [loading, setLoading] = useState(true); // Optional: ローディング状態管理\n  const [error, setError] = useState(null);     // Optional: エラーハンドリング\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // 並行して複数のAPIを呼び出し\n        const [companiesResponse, shopsResponse] = await Promise.all([\n          axios.get(\"http://0.0.0.0:5001/companies\"),\n          axios.get(\"http://0.0.0.0:5001/shops\")\n        ]);\n        \n        // 取得したデータをそれぞれのステートに保存\n        setCompanies(companiesResponse.data);\n        setShops(shopsResponse.data);\n      } catch (err) {\n        setError(\"データの取得に失敗しました\");\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n\n  if (loading) return <p>読み込み中...</p>;\n  if (error) return <p>{error}</p>;\n\n  console.log('companies',companies)\n  console.log('shops',shops)\n\n\n  ////  ~~~~~~~~~~~~~~~~~~~~ 企業 ~~~~~~~~~~~~~~~~~~~~\n\n  const handleEditCompanyModalContents = (index) => {\n    // Get the company data at the given index\n    const companyToEdit = companies[index];\n    //UI 表示のため\n    const mappedCompanyForUI = {\n      \"会社名\": companyToEdit.company_name,\n      \"会社住所\": companyToEdit.company_address,\n      \"会社連絡先\": companyToEdit.company_contact_address,\n      \"代表者\": companyToEdit.company_owner_name,\n      \"メモ\": companyToEdit.remarks,\n    };\n    setEditingCompany({ ...mappedCompanyForUI, index });\n    setIsCompanyModalOpen(true);\n  };\n\n  //既存企業の削除\n  const handleDeleteCompany = async (index) => {\n    const company = companies[index];\n    const isConfirmed = window.confirm(`${company.company_name} を本当に削除しますか？`);\n\n    if (isConfirmed) {\n      try {\n        // Set the contract to 'cancel'\n        console.log(\"####company###\", company)\n        company.contract = 'cancel';\n\n        // TODO Make the API request to delete the company\n        const response = await fetch(`http://0.0.0.0:5001/company/temp_status_changes/${company.company_id}/${company.contract}`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n          }\n        });\n\n        if (response.ok) {\n          // If successful, remove the company from the local state\n          setCompanies(companies.filter((_, i) => i !== index));\n          alert(`企業（${company.company_name}）が削除されました`);\n        } else {\n          // Handle error if the API request fails\n          alert(`企業（${company.company_name}）の削除に失敗しました`);\n        }\n      } catch (error) {\n        // Handle network error\n        console.error(\"Error deleting company:\", error);\n        alert(\"ネットワークエラーが発生しました\");\n      }\n    }\n  };\n\n\nconst resetCompanyData = () => {\n  setNewCompanyData({...companyTableColumns}); // スプレッド構文でプロパティを展開\n};\n\n\n  //既存企業の編集\n  const handleEditCompany = async () => {\n    const updatedCompanies = [...companies];\n    // Filter and update the company by its index\n    const updatedCompany = { ...editingCompany };  // Create a copy of the editing company object\n    const current_index = updatedCompany.index\n    const company = updatedCompanies[current_index];\n\n    const updatedCompanyPayload = {\n      company_name: updatedCompany.会社名,\n      company_address: updatedCompany.会社住所,\n      company_contact_address: updatedCompany.会社連絡先,\n      company_owner_name: updatedCompany.代表者,\n      remarks: updatedCompany.メモ,\n    };\n    updatedCompanyPayload.contract = 'contract';\n\n    console.log('updatedCompanies', updatedCompanies);\n    console.log('company', company);\n    console.log('updatedCompany', updatedCompany);\n    console.log('updatedCompanyPayload', updatedCompanyPayload);\n\n    // Make the API request to save the updated companies\n    try {\n      const companyId = company.company_id;\n      const response = await fetch(`http://0.0.0.0:5001/company/${companyId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(updatedCompanyPayload),\n      });\n\n      console.log('response',response)\n\n      if (response.ok) {\n        // Assuming the response returns a success status\n        delete updatedCompanyPayload.contract;\n        const updatedList = [...companies];\n        updatedList[updatedCompany.index] = {...updatedList[updatedCompany.index], ...updatedCompanyPayload,};\n\n        setCompanies(updatedList);\n        setEditingCompany(null);\n        setIsCompanyModalOpen(false);\n        alert(`${updatedList.company_name}の更新に成功しました。`);\n      } else {\n        alert(`${updatedCompanyPayload.company_name}の更新に失敗しました。`);\n      }\n    } catch (error) {\n      console.error('Error saving company data:', error);\n      alert(`${updatedCompanyPayload.company_name}の更新に失敗しました。`);\n    }\n  };\n  \n  //新規企業の追加\n  const handleAddCompany = async () => {\n      // 会社名が空かどうかを確認\n    if (!newCompanyData.会社名) {\n      alert(\"会社名は必須です。\");\n      return; // 会社名がない場合は処理を中断\n    }\n    // Map front-end keys to API keys\n    const mappedCompany = {\n      company_name: newCompanyData.会社名,\n      company_address: newCompanyData.会社住所,\n      company_contact_address: newCompanyData.会社連絡先,\n      company_owner_name: newCompanyData.代表者,\n      remarks: newCompanyData.メモ,\n    };\n\n    try {\n      console.log(\"mappedCompany\", mappedCompany); // Logs the object with the new keys\n      // API call to add the new company\n      const response = await fetch('http://0.0.0.0:5001/company', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(mappedCompany),\n      });\n\n      console.log(\"##--companies\", companies);\n  \n      if (!response.ok) {\n        throw new Error('Failed to add company');\n      }\n  \n      // Update the local state after the company has been successfully added\n      const addedCompany = await response.json(); // Assuming the API returns the added company data\n      \n\n\n      setCompanies([...companies, addedCompany]);\n  \n      // Reset the form and close the modal\n      // setNewCompanyData({ ...companyTableColumns });\n\n      console.log(\"!!!addedCompany!!!\", addedCompany);\n      console.log(\"##--companies--##\", companies);\n\n      // close the modal\n      setIsCompanyModalOpen(false);\n\n      alert(\"保存が成功しました。\");\n  \n    } catch (error) {\n      console.error('Error adding company:', error);\n      alert('企業の追加に失敗しました');\n    }\n  };\n\n////  ~~~~~~~~~~~~~~~~~~~~ 店舗 ~~~~~~~~~~~~~~~~~~~~\n\n  //新規店舗の追加\n  const handleAddShop = async () => {\n\n    console.log('!!companies!!', companies);\n    console.log('!!shopAddTargetIndex!!', shopAddTargetIndex); // company index\n    console.log('!!shopAddTargetIndex!!', companies[shopAddTargetIndex]);\n    console.log('!!newShopData!!', newShopData);\n\n    if (!newShopData.店舗名 || !newShopData.契約開始日 || !newShopData.契約終了日) {\n      alert(\"店舗名、契約開始日、契約終了日は必須です。\");\n      return; // 必須項目が未入力の場合は処理を中断\n    }\n\n    const relating_company_id = companies[shopAddTargetIndex].company_id;\n    console.log('!!relating_company_id!!', relating_company_id);\n\n    // TODO Map front-end keys to API keys\n    const mappedShop = {\n      shop_name: newShopData.店舗名,\n      shop_owner_name: newShopData.店舗住所,\n      shop_contact_address: newShopData.会社連絡先,\n      shop_location: newShopData.代表者,\n      start_contract_date: newShopData.契約開始日,\n      end_contract_date: newShopData.契約終了日,\n      in_charge: newShopData.担当者,\n      remarks: newShopData.メモ\n    };\n\n    try {\n      console.log(\"INSERT relating_company_id\", relating_company_id); \n      console.log(\"INSERT mappedShop\", mappedShop); // Logs the object with the new keys\n\n      // API call to add the new shop\n      const response = await fetch(`http://0.0.0.0:5001/shop/${relating_company_id}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(mappedShop),\n      });\n  \n      if (!response.ok) {\n        throw new Error('Failed to add shop');\n      }\n\n      //リターンでデータの受け取りと、追加\n      const addedShops = await response.json(); // Assuming the API returns the added company data\n      console.log(\"!!!addedShops!!!\", addedShops);\n      console.log(\"!!!--shops--!!!\", shops);\n\n      const link_response = await fetch(`http://0.0.0.0:5001/survey-link/${company_id}/${shop_id}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        }\n      });\n\n\n\n      // ローカル状態に新店舗を追加\n      setShops([...shops, addedShops]);\n      \n      // 追加後新たに追加するときに、追加項目を準備\n      setNewShopData({ ...shopTableColumns });\n\n      //モーダルを削除\n      setIsShopModalOpen(false);\n\n      alert(\"保存が成功しました。\");\n  \n    } catch (error) {\n      console.error('Error adding shop:', error);\n      alert('企業の追加に失敗しました');\n    }\n  };\n\n\n  //既存店舗の削除\n  const handleDeleteShop = async (companyIndex, shop_id) => {\n    const company = companies[companyIndex];//会社の指定\n    const shopInCompany = shops.find(shop => shop.company_id === company.company_id && shop.shop_id === shop_id);;//ショップの指定\n    console.log(\"@@company\",company)\n    console.log(\"@@shopInCompany\",shopInCompany)\n\n    const isConfirmed = window.confirm(`${shopInCompany.shop_name} を本当に削除しますか？`);\n\n    if (isConfirmed) {\n      try {\n        // Set the contract to 'cancel'\n        console.log(\"@@DELETE shop\", shopInCompany)\n        shopInCompany.contract = 'cancel';\n\n        // TODO Make the API request to delete the company /shop/temp_status_changes/{company_id}/{shop_id}/{contract}\n        const response = await fetch(`http://0.0.0.0:5001/shop/temp_status_changes/${shopInCompany.company_id}/${shopInCompany.shop_id}/${shopInCompany.contract}`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n          }\n        });\n\n        console.log(\"@@DELETE shop response\", response)\n\n        if (response.ok) {\n          setShops(shops.filter(shop => shop.shop_id !== shop_id));\n          alert(`${company.company_name}）の店舗（${shopInCompany.shop_name}）が削除されました。`);\n        } else {\n          // Handle error if the API request fails\n          alert(`${company.company_name}）の店舗（${shopInCompany.shop_name}）の削除に失敗しました。`);\n        }\n      } catch (error) {\n        // Handle network error\n        console.error(\"Error deleting company:\", error);\n        alert(\"ネットワークエラーが発生しました\");\n      }\n    }\n  };\n\n  //既存店舗の編集項目表示\n  const handleEditShopModalContents = (companyIndex, shop_id) => {\n\n    console.log('!!!companyIndex!!!', companyIndex)\n    console.log('!!!shop_id!!!', shop_id)\n    const company = companies[companyIndex];//会社の指定\n    const company_id = company.company_id\n    const shopToEdit = shops.find(shop => shop.company_id === company_id && shop.shop_id === shop_id);;//ショップの指定\n\n    //UI 表示のため\n    const mappedShopForUI = {\n      \"店舗名\": shopToEdit.shop_name,\n      \"店舗住所\": shopToEdit.shop_location,\n      \"会社連絡先\": shopToEdit.shop_contact_address,\n      \"代表者\": shopToEdit.shop_owner_name,\n      \"契約開始日\": shopToEdit.start_contract_date,\n      \"契約終了日\": shopToEdit.end_contract_date,\n      \"担当者\": shopToEdit.in_charge,\n      \"メモ\": shopToEdit.remarks\n    };\n    setEditingShop({ ...mappedShopForUI, shop_id, company_id});\n\n    console.log('RRRR', mappedShopForUI)\n    setIsShopModalOpen(true);\n  };\n\n  //　既存店舗の編集\n  const handleEditShop = async () => {\n\n    const company_id = editingShop.company_id\n    const shop_id = editingShop.shop_id\n    const index = shops.findIndex(\n      shop => shop.company_id === company_id && shop.shop_id === shop_id\n    );\n    console.log('!!!index!!!', index)\n\n    const updatedShop = { ...editingShop, index};\n\n    const updatedShopPayload = {\n      shop_name: updatedShop.店舗名,\n      shop_location: updatedShop.店舗住所,\n      shop_contact_address: updatedShop.会社連絡先,\n      shop_owner_name: updatedShop.代表者,\n      start_contract_date: updatedShop.契約開始日,\n      end_contract_date: updatedShop.契約終了日,\n      in_charge: updatedShop.担当者,\n      remarks: updatedShop.メモ,\n    };\n\n    try {\n      const response = await fetch(`http://0.0.0.0:5001/shop/${company_id}/${shop_id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(updatedShopPayload),\n      });\n      console.log('@@response@@', response)\n\n      if (response.ok) {\n        console.log('##########', updatedShop)\n        // 更新対象だけを更新する\n        setShops(prevShops => {\n          const newShops = [...prevShops];\n          newShops[index] = { ...newShops[index], ...updatedShopPayload };\n          return newShops;\n        });\n        console.log('######rr####', response)\n        setEditingShop(null);\n        setIsShopModalOpen(false);\n        alert(`${updatedShopPayload.shop_name}の更新に成功しました。`);\n      } else {\n        alert(`${updatedShopPayload.shop_name}の更新に失敗しました。`);\n      }\n    } catch (error) {\n      console.error('Error saving shop data:', error);\n      alert(`${updatedShopPayload.shop_name}の更新に失敗しました。`);\n    }\n  };\n\n  \n\n  // ~~~~~~~~~~~~~~~~~~~~ HTML ~~~~~~~~~~~~~~~~~~~~\n  return (\n    <div style={{ maxWidth: \"1000px\", margin: \"0 auto\", padding: \"20px\", fontFamily: \"'Arial', sans-serif\", color: \"#333\" }}>\n      <h1 style={{ textAlign: \"center\", color: \"#007bff\" }}>企業および店舗情報の管理</h1>\n\n      {/* ビューモード切り替え */}\n      <div style={{ display: \"flex\", justifyContent: \"center\", marginBottom: \"20px\" }}>\n        <button onClick={() => setViewMode(\"company\")} style={{ padding: \"10px 20px\", marginRight: \"10px\", backgroundColor: viewMode === \"company\" ? \"#007bff\" : \"#f8f9fa\", border: \"1px solid #007bff\", borderRadius: \"5px\", cursor: \"pointer\" }}>\n          企業情報\n        </button>\n        <button onClick={() => setViewMode(\"shop\")} style={{ padding: \"10px 20px\", backgroundColor: viewMode === \"shop\" ? \"#007bff\" : \"#f8f9fa\", border: \"1px solid #007bff\", borderRadius: \"5px\", cursor: \"pointer\" }}>\n          店舗情報\n        </button>\n      </div>\n\n\n      {/* 企業表示 */}\n      {viewMode === \"company\" && (\n        <>\n          <h2 style={{ textAlign: \"center\", marginBottom: \"20px\" }}>企業情報</h2>\n          \n          <div style={{ margin: \"10px 0\", textAlign: \"right\" }}>\n            <CSVLink\n              data={companies.map(company => ({\n                会社名: company.company_name,\n                会社住所: company.company_address,\n                会社連絡先: company.company_contact_address,\n                代表者: company.company_owner_name,\n                メモ: company.remarks,\n              }))}\n              headers={[\n                { label: \"会社名\", key: \"会社名\" },\n                { label: \"会社住所\", key: \"会社住所\" },\n                { label: \"会社連絡先\", key: \"会社連絡先\" },\n                { label: \"代表者\", key: \"代表者\" },\n                { label: \"メモ\", key: \"メモ\" },\n              ]}\n              filename=\"company_details.csv\"\n              style={{ padding: \"10px 20px\", backgroundColor: \"#17a2b8\", color: \"#fff\", borderRadius: \"5px\", textDecoration: \"none\" }}\n            >\n              CSV出力\n          </CSVLink>\n        </div>\n\n          <button onClick={() => { setEditingCompany(null); setIsCompanyModalOpen(true); }} style={{ padding: \"10px 20px\", backgroundColor: \"#28a745\", color: \"#fff\", border: \"none\", borderRadius: \"5px\", cursor: \"pointer\" }}>\n            新規企業追加\n          </button>\n\n          {/* 会社名でソート */}\n          {companies\n            .sort((a, b) => a.company_name.localeCompare(b.company_name)) // 会社名で昇順ソート\n            .map((company, index) => (\n              <div key={company.id} style={{ marginBottom: \"20px\" }}>\n                <table border=\"1\" style={{ width: \"100%\", borderCollapse: \"collapse\", marginTop: \"10px\" }}>\n                  <thead>\n                    <tr style={{ backgroundColor: \"#f1f1f1\" }}>\n                      <th>会社名</th>\n                      <th>代表者の名前</th>\n                      <th>会社住所</th>\n                      <th>会社連絡先</th>\n                      <th>メモ</th>\n                      <th>アクション</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr>\n                      <td>{company.company_name}</td>\n                      <td>{company.company_owner_name}</td>\n                      <td>{company.company_address}</td>\n                      <td>{company.company_contact_address}</td>\n                      <td>{company.remarks}</td>\n                      <td style={{ textAlign: \"center\" }}>\n                        <button onClick={() => handleEditCompanyModalContents(index)} style={{ marginRight: \"5px\", backgroundColor: \"#ffc107\", padding: \"5px 10px\", borderRadius: \"5px\" }}>編集</button>\n                        <button onClick={() => handleDeleteCompany(index)} style={{ backgroundColor: \"#dc3545\", padding: \"5px 10px\", borderRadius: \"5px\", color: \"#fff\" }}>削除</button>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            ))}\n            \n        </>\n      )}\n\n      {/* 店舗表示 */}\n      {viewMode === \"shop\" && (\n        <>\n          <h2 style={{ textAlign: \"center\", marginBottom: \"20px\" }}>店舗情報</h2>\n\n          <div style={{ margin: \"10px 0\", textAlign: \"right\" }}>\n          <CSVLink\n            data={shops.map(shop => {\n              const company = companies.find(c => c.company_id === shop.company_id);\n              return {\n                会社名: company?.company_name || \"\",\n                店舗名: shop.shop_name,\n                店舗住所: shop.shop_location,\n                会社連絡先: shop.shop_contact_address,\n                代表者: shop.shop_owner_name,\n                契約開始日: shop.start_contract_date,\n                契約終了日: shop.end_contract_date,\n                担当者: shop.in_charge,\n                メモ: shop.remarks,\n                アンケートリンク: shop.surveyUrl,\n                Google評価リンク: shop.googleUrl,\n              };\n            })}\n            headers={[\n              { label: \"会社名\", key: \"会社名\" },\n              { label: \"店舗名\", key: \"店舗名\" },\n              { label: \"店舗住所\", key: \"店舗住所\" },\n              { label: \"会社連絡先\", key: \"会社連絡先\" },\n              { label: \"代表者\", key: \"代表者\" },\n              { label: \"契約開始日\", key: \"契約開始日\" },\n              { label: \"契約終了日\", key: \"契約終了日\" },\n              { label: \"担当者\", key: \"担当者\" },\n              { label: \"メモ\", key: \"メモ\" },\n              { label: \"アンケートリンク\", key: \"アンケートリンク\" },\n              { label: \"Google評価リンク\", key: \"Google評価リンク\" },\n            ]}\n            filename=\"shops.csv\"\n            style={{ padding: \"10px 20px\", backgroundColor: \"#17a2b8\", color: \"#fff\", borderRadius: \"5px\", textDecoration: \"none\" }}\n          >\n            CSV出力\n          </CSVLink>\n        </div>\n\n\n          {companies.map((company, companyIndex) => {\n            // Filter shops by company_id\n            const companyShops = shops.filter(shop => shop.company_id === company.company_id);\n\n            return (\n              <div key={company.id} style={{ marginBottom: \"20px\" }}>\n                <h3>{company.company_name} の店舗情報</h3>\n                <button onClick={() => { setShopAddTargetIndex(companyIndex); setEditingShop(null); setIsShopModalOpen(true); }} style={{ padding: \"8px 15px\", backgroundColor: \"#28a745\", color: \"#fff\", borderRadius: \"5px\" }}>\n                  新規店舗追加\n                </button>\n\n                <table border=\"1\" style={{ width: \"100%\", marginTop: \"10px\", borderCollapse: \"collapse\" }}>\n                  <thead>\n                    <tr style={{ backgroundColor: \"#f1f1f1\" }}>\n                      <th>店舗名</th>\n                      <th>店舗住所</th>\n                      <th>会社連絡先</th>\n                      <th>代表者</th>\n                      <th>契約開始日</th>\n                      <th>契約終了日</th>\n                      <th>担当者</th>\n                      <th>メモ</th>\n                      <th>アンケートリンク</th>\n                      <th>Google評価リンク</th>\n                      <th>アクション</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {companyShops.length > 0 ? (\n                      companyShops.map((shop, shopIndex) => (\n                        <tr key={shop.id}>\n                          <td>{shop.shop_name}</td>\n                          <td>{shop.shop_location}</td>\n                          <td>{shop.shop_contact_address}</td>\n                          <td>{shop.shop_owner_name}</td>\n                          <td>{shop.start_contract_date}</td>\n                          <td>{shop.end_contract_date}</td>\n                          <td>{shop.in_charge}</td>\n                          <td>{shop.remarks}</td>\n                        \n                          <td><a href={shop.surveyUrl} target=\"_blank\" rel=\"noopener noreferrer\">{shop.surveyUrl}</a></td>\n                          <td><a href={shop.googleUrl} target=\"_blank\" rel=\"noopener noreferrer\">{shop.googleUrl}</a></td>\n                          <td>\n                            <button onClick={() => handleEditShopModalContents(companyIndex, shop.shop_id)} style={{ marginRight: \"5px\", backgroundColor: \"#ffc107\", padding: \"5px 10px\", borderRadius: \"5px\" }}>編集</button>\n                            <button onClick={() => handleDeleteShop(companyIndex, shop.shop_id)} style={{ backgroundColor: \"#dc3545\", color: \"#fff\", padding: \"5px 10px\", borderRadius: \"5px\" }}>削除</button>\n                          </td>\n                        </tr>\n                      ))\n                    ) : (\n                      <tr>\n                        <td colSpan=\"11\" style={{ textAlign: \"center\" }}>店舗情報がありません</td>\n                      </tr>\n                    )}\n                  </tbody>\n                </table>\n              </div>\n            );\n          })}\n        </>\n      )}\n\n\n      {/* 企業モーダル */}\n      <Modal isOpen={isCompanyModalOpen} onRequestClose={() => setIsCompanyModalOpen(false)} style={{ content: { maxWidth: \"600px\", margin: \"auto\" } }}>\n        <h3>{editingCompany ? \"企業情報を編集\" : \"新規企業を追加\"}</h3>\n        {(editingCompany ? Object.keys(editingCompany).filter(k => k !== \"id\" && k !== \"shops\" && k !== \"index\") : Object.keys(newCompanyData)).map(key => (\n          <div key={key} style={{ marginBottom: \"10px\" }}>\n            <label>{key}:</label>\n            <input\n              type=\"text\"\n              value={editingCompany ? editingCompany[key] : newCompanyData[key]}\n              onChange={(e) =>\n                editingCompany\n                  ? setEditingCompany({ ...editingCompany, [key]: e.target.value })\n                  : setNewCompanyData({ ...newCompanyData, [key]: e.target.value })\n              }\n              style={{ width: \"100%\" }}\n            />\n          </div>\n        ))}\n\n        <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n          <button onClick={editingCompany ? handleEditCompany : handleAddCompany} style={{ backgroundColor: \"#007bff\", color: \"#fff\", padding: \"10px 20px\" }}>\n            {editingCompany ? \"保存\" : \"追加\"}\n          </button>\n\n          <button onClick={() => { \n            setIsCompanyModalOpen(false); \n            resetCompanyData(); // Reset when cancelling\n          }} style={{ backgroundColor: \"#6c757d\", color: \"#fff\", padding: \"10px 20px\" }}>\n            キャンセル\n          </button>\n        </div>\n      </Modal>\n      \n      {/* 店舗モーダル */}\n      <Modal isOpen={isShopModalOpen} onRequestClose={() => setIsShopModalOpen(false)} style={{ content: { maxWidth: \"600px\", margin: \"auto\" } }}>\n        <h3>{editingShop ? \"店舗情報を編集\" : \"新規店舗を追加\"}</h3>\n\n        {(editingShop ? Object.keys(editingShop).filter(k => ![\"id\", \"companyIndex\", \"shopIndex\", \"shop_id\", \"company_id\"].includes(k)) : Object.keys(newShopData)).map(key => (\n          <div key={key} style={{ marginBottom: \"10px\" }}>\n            <label>{key}:</label>\n\n            <input\n              type={[\"契約開始日\", \"契約終了日\"].includes(key) ? \"date\" : \"text\"}\n              value={editingShop ? editingShop[key] : newShopData[key]}\n              onChange={(e) =>\n                editingShop\n                  ? setEditingShop({ ...editingShop, [key]: e.target.value })\n                  : setNewShopData({ ...newShopData, [key]: e.target.value })\n              }\n\n              style={{ width: \"100%\" }}\n            />\n          </div>\n        ))}\n\n        <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n          <button onClick={editingShop ? handleEditShop : handleAddShop} style={{ backgroundColor: \"#007bff\", color: \"#fff\", padding: \"10px 20px\" }}>\n            {editingShop ? \"保存\" : \"追加\"}\n          </button>\n          <button onClick={() => {\n            setIsShopModalOpen(false);\n            // resetShopData(); // Reset when cancelling\n          }}style={{ backgroundColor: \"#6c757d\", color: \"#fff\", padding: \"10px 20px\" }}>\n            キャンセル\n            </button>\n    \n        </div>\n      </Modal>\n    </div>\n  );\n};\n\nexport default ManageInfo;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}